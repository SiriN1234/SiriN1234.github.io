<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->

    

    
        <meta name="description" content="# This Python 3 environment comes with many helpful analytics libraries installed
# It is defined by the kaggle/python Docker image: https://github.co"/>
    

    <!--Author-->
    
        <meta name="author" content="SiriN"/>
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="2022.03.25 수업내용과 실습1"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="# This Python 3 environment comes with many helpful analytics libraries installed
# It is defined by the kaggle/python Docker image: https://github.co"/>
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="SiriN&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article"/>
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="https://SiriN1234.github.ioimg/home-bg.jpg"/>
    

        <meta name="twitter:card" content="summary_large_image"/>

    

    
        <meta name="twitter:image" content="https://SiriN1234.github.ioimg/home-bg.jpg"/>
    

    <!-- Title -->
    
    <title>2022.03.25 수업내용과 실습1 - SiriN&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->
    


    <!-- favicon -->
    

</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Configurable Title</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-clean-blog">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>2022.03.25 수업내용과 실습1</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                            Posted by Hanjeongin on
                        
                        
                            2022-03-25
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/Python/">#Python</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># This Python 3 environment comes with many helpful analytics libraries installed</span>
<span class="token comment" spellcheck="true"># It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python</span>
<span class="token comment" spellcheck="true"># For example, here's several helpful packages to load</span>

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np <span class="token comment" spellcheck="true"># linear algebra</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd <span class="token comment" spellcheck="true"># data processing, CSV file I/O (e.g. pd.read_csv)</span>

<span class="token comment" spellcheck="true"># Input data files are available in the read-only "../input/" directory</span>
<span class="token comment" spellcheck="true"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span>

<span class="token keyword">import</span> os
<span class="token keyword">for</span> dirname<span class="token punctuation">,</span> _<span class="token punctuation">,</span> filenames <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span><span class="token string">'/kaggle/input'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> filename <span class="token keyword">in</span> filenames<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using "Save &amp; Run All" </span>
<span class="token comment" spellcheck="true"># You can also write temporary files to /kaggle/temp/, but they won't be saved outside of the current session</span>
</code></pre>
<h1 id="데이터-불러오기"><a href="#데이터-불러오기" class="headerlink" title="데이터 불러오기"></a>데이터 불러오기</h1><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"/kaggle/input/kaggle-survey-2021/kaggle_survey_2021_responses.csv"</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">questions <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
questions
</code></pre>
<pre class=" language-python"><code class="language-python">df2 <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
df2<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">df2<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="Ploty-Express"><a href="#Ploty-Express" class="headerlink" title="Ploty Express"></a>Ploty Express</h2><pre class=" language-python"><code class="language-python">temp <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
  <span class="token string">"Fruit"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"Apples"</span><span class="token punctuation">,</span> <span class="token string">"Oranges"</span><span class="token punctuation">,</span> <span class="token string">"Bananas"</span><span class="token punctuation">,</span> <span class="token string">"Apples"</span><span class="token punctuation">,</span> <span class="token string">"Oranges"</span><span class="token punctuation">,</span> <span class="token string">"Bananas"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"Contestant"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"Alex"</span><span class="token punctuation">,</span> <span class="token string">"Alex"</span><span class="token punctuation">,</span> <span class="token string">"Alex"</span><span class="token punctuation">,</span> <span class="token string">"Jordan"</span><span class="token punctuation">,</span> <span class="token string">"Jordan"</span><span class="token punctuation">,</span> <span class="token string">"Jordan"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"Number Eaten"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;)</span>

temp
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> plotly<span class="token punctuation">.</span>offline <span class="token keyword">import</span> init_notebook_mode
init_notebook_mode<span class="token punctuation">(</span>connected <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> plotly<span class="token punctuation">.</span>express <span class="token keyword">as</span> px <span class="token comment" spellcheck="true"># Seaborn</span>

fig <span class="token operator">=</span> px<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>temp<span class="token punctuation">,</span> x <span class="token operator">=</span> <span class="token string">'Fruit'</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">"Number Eaten"</span><span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">"Contestant"</span><span class="token punctuation">,</span> barmode <span class="token operator">=</span> <span class="token string">"group"</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword">as</span> go <span class="token comment" spellcheck="true"># Matplotlib</span>

q1_df <span class="token operator">=</span> df2<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># print(q1_df)</span>

fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> q1_df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y <span class="token operator">=</span> q1_df<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">CATEGORY_ORDER <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"18-21"</span><span class="token punctuation">,</span> <span class="token string">"22-24"</span><span class="token punctuation">,</span> <span class="token string">"25-29"</span><span class="token punctuation">,</span> <span class="token string">"30-34"</span><span class="token punctuation">,</span> <span class="token string">"35-39"</span><span class="token punctuation">,</span> <span class="token string">"40-44"</span><span class="token punctuation">,</span> <span class="token string">"45-49"</span><span class="token punctuation">,</span> <span class="token string">"50-54"</span><span class="token punctuation">,</span> <span class="token string">"55-59"</span><span class="token punctuation">,</span> <span class="token string">"60-69"</span><span class="token punctuation">,</span> <span class="token string">"70+"</span><span class="token punctuation">]</span>

q1_df <span class="token operator">=</span> df2<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># print(q1_df)</span>

<span class="token comment" spellcheck="true"># basic graph</span>
fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> q1_df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y <span class="token operator">=</span> q1_df<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># styling changes</span>
fig<span class="token punctuation">.</span>update_layout<span class="token punctuation">(</span>plot_bgcolor <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">,</span> 
                 font  <span class="token operator">=</span> dict<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">"#909999"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                 title <span class="token operator">=</span> dict<span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string">"your TITLE text"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                 xaxis <span class="token operator">=</span> dict<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"your X-AXIS TITLE"</span><span class="token punctuation">,</span> linecolor <span class="token operator">=</span> <span class="token string">"#21DBAA"</span><span class="token punctuation">,</span> categoryorder <span class="token operator">=</span> <span class="token string">"array"</span><span class="token punctuation">,</span> categoryarray <span class="token operator">=</span> CATEGORY_ORDER<span class="token punctuation">)</span><span class="token punctuation">,</span> 
                 yaxis <span class="token operator">=</span> dict<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"your Y-AXIS TITLE"</span><span class="token punctuation">,</span> linecolor <span class="token operator">=</span> <span class="token string">"#DB9021"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="Group-Bar-Graph"><a href="#Group-Bar-Graph" class="headerlink" title="Group Bar Graph"></a>Group Bar Graph</h2><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># df2['Q2'].value_counts()</span>
q1_q2_df <span class="token operator">=</span> df2<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Q1"</span><span class="token punctuation">,</span> <span class="token string">"Q2"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'Prefer not to say':'etc', 'Nonbinary':"etc", "Prefer to self-describe": "etc"&amp;#125;)</span>
q1_q2_df<span class="token punctuation">[</span><span class="token string">'Q2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 3개 데이터를 etc로 통합, 전처리</span>
</code></pre>
<pre class=" language-python"><code class="language-python">q1_q2_df <span class="token operator">=</span> q1_q2_df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Q2'</span><span class="token punctuation">,</span><span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;0:"Count"&amp;#125;)</span>
q1_q2_df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> gender<span class="token punctuation">,</span> group <span class="token keyword">in</span> q1_q2_df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">"Q2"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
   fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> group<span class="token punctuation">[</span><span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> group<span class="token punctuation">[</span><span class="token string">'Count'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name <span class="token operator">=</span> gender<span class="token punctuation">)</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>update_layout<span class="token punctuation">(</span>barmode<span class="token operator">=</span><span class="token string">"group"</span><span class="token punctuation">,</span> 
                 plot_bgcolor <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="나라별-임금-격차"><a href="#나라별-임금-격차" class="headerlink" title="나라별 임금 격차"></a>나라별 임금 격차</h1><ul>
<li>Q3, Q25</li>
</ul>
<pre class=" language-python"><code class="language-python">df2<span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">df2<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">q3_df <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> q3_df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y <span class="token operator">=</span> q3_df<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">q3_q25 <span class="token operator">=</span> df2<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">,</span> <span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
q3_q25<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'$0-999'</span><span class="token punctuation">,</span> <span class="token string">'1,000-1,999'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'$0-1,999'</span><span class="token punctuation">,</span> inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q3_q25<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'2,000-2,999'</span><span class="token punctuation">,</span> <span class="token string">'3,000-3,999'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'$2,000-3,999'</span><span class="token punctuation">,</span> inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q3_q25<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'2,000-2,999'</span><span class="token punctuation">,</span> <span class="token string">'3,000-3,999'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'$2,000-3,999'</span><span class="token punctuation">,</span> inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q3_q25<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'4,000-4,999'</span><span class="token punctuation">,</span> <span class="token string">'5,000-7,499'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'$4,000-7,499'</span><span class="token punctuation">,</span> inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q3_q25<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'25,000-29,999'</span><span class="token punctuation">,</span> <span class="token string">'60,000-69,999'</span><span class="token punctuation">,</span>  
                       <span class="token string">'30,000-39,999'</span><span class="token punctuation">,</span><span class="token string">'15,000-19,999'</span><span class="token punctuation">,</span> <span class="token string">'70,000-79,999'</span><span class="token punctuation">,</span> 
                       <span class="token string">'10,000-14,999'</span><span class="token punctuation">,</span> <span class="token string">'20,000-24,999'</span><span class="token punctuation">,</span> <span class="token string">'7,500-9,999'</span><span class="token punctuation">,</span> 
                       <span class="token string">'100,000-124,999'</span><span class="token punctuation">,</span> <span class="token string">'40,000-49,999'</span><span class="token punctuation">,</span> <span class="token string">'50,000-59,999'</span><span class="token punctuation">,</span> 
                       <span class="token string">'300,000-499,999'</span><span class="token punctuation">,</span> <span class="token string">'200,000-249,999'</span><span class="token punctuation">,</span> <span class="token string">'125,000-149,999'</span><span class="token punctuation">,</span> 
                       <span class="token string">'250,000-299,999'</span><span class="token punctuation">,</span> <span class="token string">'80,000-89,999'</span><span class="token punctuation">,</span> <span class="token string">'90,000-99,999'</span><span class="token punctuation">,</span> 
                       <span class="token string">'150,000-199,999'</span><span class="token punctuation">,</span> <span class="token string">'>$1,000,000'</span><span class="token punctuation">,</span> <span class="token string">'$500,000-999,999'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'$7,500+'</span><span class="token punctuation">,</span> inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>

q3_q25<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">q3_q25<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>subset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Q25"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">q3_q25 <span class="token operator">=</span> q3_q25<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">,</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;0:"Count"&amp;#125;)</span>

<span class="token comment" spellcheck="true"># India</span>
india_df <span class="token operator">=</span> q3_q25<span class="token punctuation">[</span>q3_q25<span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"India"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
india_df<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> india_df<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span> <span class="token operator">/</span> india_df<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>
india_df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># USA</span>
usa_df <span class="token operator">=</span> q3_q25<span class="token punctuation">[</span>q3_q25<span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"United States of America"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
usa_df<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> usa_df<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span> <span class="token operator">/</span> usa_df<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>
usa_df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">india_df<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>round<span class="token punctuation">(</span>india_df<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
usa_df<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>round<span class="token punctuation">(</span>usa_df<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

india_usa_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>india_df<span class="token punctuation">,</span> usa_df<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
india_usa_df
</code></pre>
<pre class=" language-python"><code class="language-python">fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> country<span class="token punctuation">,</span> group <span class="token keyword">in</span> india_usa_df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">"Q3"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
   fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> group<span class="token punctuation">[</span><span class="token string">'Q25'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                        y <span class="token operator">=</span> group<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                        name <span class="token operator">=</span> country<span class="token punctuation">,</span> 
                        text <span class="token operator">=</span> group<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"%"</span><span class="token punctuation">,</span> 
                        textposition<span class="token operator">=</span><span class="token string">'auto'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>update_layout<span class="token punctuation">(</span>barmode<span class="token operator">=</span><span class="token string">"group"</span><span class="token punctuation">,</span> 
                  plot_bgcolor <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="연도별-주-사용-언어의-비율-차이"><a href="#연도별-주-사용-언어의-비율-차이" class="headerlink" title="연도별 주 사용 언어의 비율 차이"></a>연도별 주 사용 언어의 비율 차이</h1><ul>
<li>막대 그래프</li>
<li>Python, R, SQL</li>
</ul>
<pre class=" language-python"><code class="language-python">df_2021 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"../input/kaggle-survey-2021/kaggle_survey_2021_responses.csv"</span><span class="token punctuation">)</span>
df_2020 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"../input/kaggle-survey-2020/kaggle_survey_2020_responses.csv"</span><span class="token punctuation">)</span>
df_2019 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"../input/kaggle-survey-2019/multiple_choice_responses.csv"</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">df_2019<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> df_2020<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> df_2021<span class="token punctuation">.</span>shape
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"2019:"</span><span class="token punctuation">,</span> df_2019<span class="token punctuation">[</span><span class="token string">'Q19'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"2020:"</span><span class="token punctuation">,</span> df_2020<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"2021:"</span><span class="token punctuation">,</span> df_2021<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 프로그래밍 언어만 뽑아옴</span>

programming_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Python"</span><span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"SQL"</span><span class="token punctuation">,</span> <span class="token string">"Java"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"Bash"</span><span class="token punctuation">,</span> <span class="token string">"Javascript"</span><span class="token punctuation">,</span> <span class="token string">"C++"</span><span class="token punctuation">]</span>
programming_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>programming_list<span class="token punctuation">)</span>

df_2019 <span class="token operator">=</span> df_2019<span class="token punctuation">[</span>df_2019<span class="token punctuation">[</span><span class="token string">'Q19'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>programming_df<span class="token punctuation">)</span><span class="token punctuation">]</span>
df_2020 <span class="token operator">=</span> df_2020<span class="token punctuation">[</span>df_2020<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>programming_df<span class="token punctuation">)</span><span class="token punctuation">]</span>
df_2021 <span class="token operator">=</span> df_2021<span class="token punctuation">[</span>df_2021<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>programming_df<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"2019:"</span><span class="token punctuation">,</span> df_2019<span class="token punctuation">[</span><span class="token string">'Q19'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"2020:"</span><span class="token punctuation">,</span> df_2020<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"2021:"</span><span class="token punctuation">,</span> df_2021<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>unique<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">q3_q5_q19_2019 <span class="token operator">=</span> df_2019<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">,</span> <span class="token string">'Q5'</span><span class="token punctuation">,</span> <span class="token string">'Q19'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
q3_q5_q19_2019 <span class="token operator">=</span> q3_q5_q19_2019<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'Q19': 'Q8'&amp;#125;, inplace = False) # To match with other datasets</span>
q3_q5_q8_2020 <span class="token operator">=</span> df_2020<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">,</span> <span class="token string">'Q5'</span><span class="token punctuation">,</span> <span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
q3_q5_q8_2021 <span class="token operator">=</span> df_2021<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Q3'</span><span class="token punctuation">,</span> <span class="token string">'Q5'</span><span class="token punctuation">,</span> <span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

q3_q5_q19_2019<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> q3_q5_q8_2020<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> q3_q5_q8_2021<span class="token punctuation">.</span>shape
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 구분을 위해 연도추가</span>

q3_q5_q19_2019<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2019'</span>
q3_q5_q8_2020<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2020'</span>
q3_q5_q8_2021<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2021'</span>

q3_q5_q19_2019<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> q3_q5_q8_2020<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> q3_q5_q8_2021<span class="token punctuation">.</span>shape
</code></pre>
<pre class=" language-python"><code class="language-python">final_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>q3_q5_q19_2019<span class="token punctuation">,</span> q3_q5_q8_2020<span class="token punctuation">,</span> q3_q5_q8_2021<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>final_df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


year_q5_q8 <span class="token operator">=</span> final_df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">,</span> <span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;0:"Count"&amp;#125;)</span>

<span class="token comment" spellcheck="true"># 2019</span>
q8_2019 <span class="token operator">=</span> year_q5_q8<span class="token punctuation">[</span>year_q5_q8<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2019"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q8_2019<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> q8_2019<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span> <span class="token operator">/</span> q8_2019<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>
q8_2019<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>round<span class="token punctuation">(</span>q8_2019<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 2020</span>
q8_2020 <span class="token operator">=</span> year_q5_q8<span class="token punctuation">[</span>year_q5_q8<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2020"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q8_2020<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> q8_2020<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span> <span class="token operator">/</span> q8_2020<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>
q8_2020<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>round<span class="token punctuation">(</span>q8_2020<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 2021</span>
q8_2021 <span class="token operator">=</span> year_q5_q8<span class="token punctuation">[</span>year_q5_q8<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"2021"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
q8_2021<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> q8_2021<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span> <span class="token operator">/</span> q8_2021<span class="token punctuation">[</span><span class="token string">"Count"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>
q8_2021<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>round<span class="token punctuation">(</span>q8_2021<span class="token punctuation">[</span><span class="token string">'percentage'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> q8_2019<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                     y <span class="token operator">=</span> q8_2019<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                     name <span class="token operator">=</span> <span class="token string">"2019"</span><span class="token punctuation">,</span> 
                     text <span class="token operator">=</span> q8_2019<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"%"</span><span class="token punctuation">,</span> 
                     textposition<span class="token operator">=</span><span class="token string">'auto'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> q8_2020<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                     y <span class="token operator">=</span> q8_2020<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                     name <span class="token operator">=</span> <span class="token string">"2020"</span><span class="token punctuation">,</span> 
                     text <span class="token operator">=</span> q8_2020<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"%"</span><span class="token punctuation">,</span> 
                     textposition<span class="token operator">=</span><span class="token string">'auto'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>add_trace<span class="token punctuation">(</span>go<span class="token punctuation">.</span>Bar<span class="token punctuation">(</span>x <span class="token operator">=</span> q8_2021<span class="token punctuation">[</span><span class="token string">'Q8'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                     y <span class="token operator">=</span> q8_2021<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                     name <span class="token operator">=</span> <span class="token string">"2021"</span><span class="token punctuation">,</span> 
                     text <span class="token operator">=</span> q8_2021<span class="token punctuation">[</span><span class="token string">'%'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"%"</span><span class="token punctuation">,</span> 
                     textposition<span class="token operator">=</span><span class="token string">'auto'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="히트맵"><a href="#히트맵" class="headerlink" title="히트맵"></a>히트맵</h1><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>figure_factory <span class="token keyword">as</span> ff

z<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Monday'</span><span class="token punctuation">,</span> <span class="token string">'Tuesday'</span><span class="token punctuation">,</span> <span class="token string">'Wednesday'</span><span class="token punctuation">,</span> <span class="token string">'Thursday'</span><span class="token punctuation">,</span> <span class="token string">'Friday'</span><span class="token punctuation">]</span>
y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Morning'</span><span class="token punctuation">,</span> <span class="token string">'Afternoon'</span><span class="token punctuation">,</span> <span class="token string">'Evening'</span><span class="token punctuation">]</span>

fig <span class="token operator">=</span> ff<span class="token punctuation">.</span>create_annotated_heatmap<span class="token punctuation">(</span>z<span class="token punctuation">,</span> x <span class="token operator">=</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> y<span class="token punctuation">,</span> colorscale <span class="token operator">=</span> <span class="token string">"Viridis"</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword">as</span> go
<span class="token keyword">from</span> functools <span class="token keyword">import</span> reduce
<span class="token keyword">from</span> itertools <span class="token keyword">import</span> product

z<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Monday'</span><span class="token punctuation">,</span> <span class="token string">'Tuesday'</span><span class="token punctuation">,</span> <span class="token string">'Wednesday'</span><span class="token punctuation">,</span> <span class="token string">'Thursday'</span><span class="token punctuation">,</span> <span class="token string">'Friday'</span><span class="token punctuation">]</span>
y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Morning'</span><span class="token punctuation">,</span> <span class="token string">'Afternoon'</span><span class="token punctuation">,</span> <span class="token string">'Evening'</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">get_anno_text</span><span class="token punctuation">(</span>z_value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    annotations<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    a<span class="token punctuation">,</span> b <span class="token operator">=</span> len<span class="token punctuation">(</span>z_value<span class="token punctuation">)</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>z_value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    flat_z <span class="token operator">=</span> reduce<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span> x<span class="token operator">+</span>y<span class="token punctuation">,</span> z_value<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># z_value.flat if you deal with numpy</span>
    coords <span class="token operator">=</span> product<span class="token punctuation">(</span>range<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> range<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> pos<span class="token punctuation">,</span> elem <span class="token keyword">in</span> zip<span class="token punctuation">(</span>coords<span class="token punctuation">,</span> flat_z<span class="token punctuation">)</span><span class="token punctuation">:</span>
        annotations<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;'font': &amp;#123;'color': '#FFFFFF'&amp;#125;,</span>
                    <span class="token string">'showarrow'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
                    <span class="token string">'text'</span><span class="token punctuation">:</span> str<span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string">'x'</span><span class="token punctuation">:</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token string">'y'</span><span class="token punctuation">:</span> pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;)</span>
    <span class="token keyword">return</span> annotations

fig <span class="token operator">=</span> go<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span>data<span class="token operator">=</span>go<span class="token punctuation">.</span>Heatmap<span class="token punctuation">(</span>
                   z<span class="token operator">=</span>z<span class="token punctuation">,</span>
                   x<span class="token operator">=</span>x<span class="token punctuation">,</span>
                   y<span class="token operator">=</span>y<span class="token punctuation">,</span>
                   hoverongaps <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>update_layout<span class="token punctuation">(</span>annotations <span class="token operator">=</span> get_anno_text<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">df2<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python">df2<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Q4'</span><span class="token punctuation">,</span> <span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unstack<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">"int16"</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> plotly<span class="token punctuation">.</span>graph_objects <span class="token keyword">as</span> go
<span class="token keyword">import</span> plotly<span class="token punctuation">.</span>figure_factory <span class="token keyword">as</span> ff

z <span class="token operator">=</span> df2<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Q4'</span><span class="token punctuation">,</span> <span class="token string">'Q1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unstack<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'int64'</span><span class="token punctuation">)</span>
z_data <span class="token operator">=</span> z<span class="token punctuation">.</span>apply<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>np<span class="token punctuation">.</span>round<span class="token punctuation">(</span>x<span class="token operator">/</span>x<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_numpy<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># convert to correlation matrix</span>
x <span class="token operator">=</span> z<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> z<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

fig <span class="token operator">=</span> ff<span class="token punctuation">.</span>create_annotated_heatmap<span class="token punctuation">(</span>z_data<span class="token punctuation">,</span> x <span class="token operator">=</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> y<span class="token punctuation">,</span> colorscale <span class="token operator">=</span> <span class="token string">"Viridis"</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/klugjo/hexo-theme-clean-blog" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2022 SiriN<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>